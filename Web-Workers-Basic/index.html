<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <title>Web Workers Basic</title>
</head>

<body>
    <h1 class="text-center mt-5">Web Workers Basicss</h1>
    <div class="btn-wapper d-flex justify-content-center align-items-center mt-5">
        <button class="btn btn-primary m-5" id="sumButton">Calculate Sum</button>
        <button class="btn btn-danger m-5" id="bgButton">Change Background</button>
    </div>
    <script>
        const sumButton = document.querySelector('#sumButton');
        const bgButton = document.querySelector('#bgButton');
        const worker = new Worker('workers.js')

        sumButton.addEventListener('click', (e) => {
            console.log('start Time: ' + new Date())

            // let sum = 0;
            // for (let i = 0; i < 4000000000; i++) {
            //     sum += i;
            // }
            // console.log('done ' + new Date())

            worker.postMessage('start') //initialize web workers code
        })

        worker.onmessage = function (msg) {
            console.log('done ' + new Date()) // return when web workers done the process
        }

        bgButton.addEventListener('click', (event) => {
            console.log('background-changed');
            if (document.body.style.background != 'lightgreen')
                document.body.style.background = 'lightgreen'
            else
                document.body.style.background = 'lightblue'
        })

    </script>
</body>

</html>